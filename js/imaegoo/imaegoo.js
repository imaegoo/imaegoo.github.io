!function(e){var c,t=e(".column-left")[0];function n(){e(window).width()<769?t.style.top=null:t?t.style.top=e(window).height()-t.scrollHeight-10+"px":setTimeout(function(){t=e(".column-left")[0],n()},500)}function d(e){e.preventDefault();function t(e){"Escape"===e.key&&(a.click(),document.body.removeEventListener("keydown",t))}var n=e.currentTarget.getAttribute("href"),i=document.createElement("div"),e=(i.className="third-party-link-mask",document.createElement("div")),o=(e.className="third-party-link-dialog",document.createElement("img")),d=(o.src="/img/small-banner.webp",o.className="third-party-link-banner",document.createElement("div")),c=(d.className="third-party-link-desc",d.innerText="您即将离开虹墨空间站，打开第三方页面： "+n,document.createElement("div")),a=(c.className="third-party-link-btn-group",document.createElement("button")),r=(a.innerText="取消",a.classList.add("button","is-light"),a.addEventListener("click",function(){document.body.removeChild(i)},{once:!0}),document.createElement("button"));r.innerText="继续访问",r.classList.add("button","is-success"),r.addEventListener("click",function(){document.body.removeChild(i),window.open(n,"_blank")},{once:!0}),c.appendChild(a),c.appendChild(r),e.appendChild(o),e.appendChild(d),e.appendChild(c),i.appendChild(e),document.body.appendChild(i);document.body.addEventListener("keydown",t),r.focus()}n(),e(window).resize(n),0!==(c=document.getElementsByClassName("twikoo-new-container")).length&&twikoo.getRecentComments({envId:window.twikooEnvId,pageSize:5,includeReply:!0}).then(function(e){for(var t,n="",i=0;i<e.length;i++){var o=e[i];o.commentText.trim()&&(n+='<article class="media"><div class="media-content"><p class="title twikoo-new-content"><a href="'+o.url+"#"+o.id+'">'+(t=""!==(t=o.commentText)&&150<(t=t.replace(/<[^>]+>/g,"")).length?t.substring(0,150)+"...":t)+'</a></p><p class="date">'+o.nick+" / "+o.relativeTime+"</p></div></article>")}for(var d=0;d<c.length;d++)c[d].innerHTML=n}).catch(function(e){console.error(e),c.innerHTML="加载失败"}),window.handleThirdPartyLink=function(e){for(var t=e.querySelectorAll("a"),n=0;n<t.length;n++){var i=t[n],o=i.getAttribute("href");o&&o.startsWith("http")&&!o.startsWith("https://www.imaegoo.com")&&(i.removeEventListener("click",d),i.addEventListener("click",d))}},handleThirdPartyLink(document.body)}(jQuery);