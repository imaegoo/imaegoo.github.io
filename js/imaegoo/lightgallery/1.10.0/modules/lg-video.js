((e,o)=>{"function"==typeof define&&define.amd?define(["jquery"],o):"object"==typeof module&&module.exports?module.exports=o(require("jquery")):o(e.jQuery)})(this,function(c){function e(e){return this.core=c(e).data("lightGallery"),this.$el=c(e),this.core.s=c.extend({},o,this.core.s),this.videoLoaded=!1,this.init(),this}var o;o={videoMaxWidth:"855px",autoplayFirstVideo:!0,youtubePlayerParams:!1,vimeoPlayerParams:!1,dailymotionPlayerParams:!1,vkPlayerParams:!1,videojs:!1,videojsOptions:{}},e.prototype.init=function(){var l=this;l.core.$el.on("hasVideo.lg.tm",function(e,o,i,l){var a=this;if(a.core.$slide.eq(o).find(".lg-video").append(a.loadVideo(i,"lg-object",!0,o,l)),l)if(a.core.s.videojs)try{videojs(a.core.$slide.eq(o).find(".lg-html5").get(0),a.core.s.videojsOptions,function(){!a.videoLoaded&&a.core.s.autoplayFirstVideo&&this.play()})}catch(e){console.error("lightGallery:- Make sure you have included videojs")}else!a.videoLoaded&&a.core.s.autoplayFirstVideo&&a.core.$slide.eq(o).find(".lg-html5").get(0).play()}.bind(this)),l.core.$el.on("onAferAppendSlide.lg.tm",function(e,o){o=this.core.$slide.eq(o).find(".lg-video-cont");o.hasClass("lg-has-iframe")||(o.css("max-width",this.core.s.videoMaxWidth),this.videoLoaded=!0)}.bind(this)),l.core.doCss()&&1<l.core.$items.length&&(l.core.s.enableSwipe||l.core.s.enableDrag)?l.core.$el.on("onSlideClick.lg.tm",function(){var e=l.core.$slide.eq(l.core.index);l.loadVideoOnclick(e)}):l.core.$slide.on("click.lg",function(){l.loadVideoOnclick(c(this))}),l.core.$el.on("onBeforeSlide.lg.tm",function(e,o,i){var l=this,o=l.core.$slide.eq(o),a=o.find(".lg-youtube").get(0),t=o.find(".lg-vimeo").get(0),r=o.find(".lg-dailymotion").get(0),s=o.find(".lg-vk").get(0),o=o.find(".lg-html5").get(0);if(a)a.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");else if(t)try{new Vimeo.Player(t).pause().catch(function(e){console.error("Unable to pause the video:",e.name)})}catch(e){console.warn("lightGallery:- Make sure you have included https://github.com/vimeo/player.js")}else if(r)r.contentWindow.postMessage("pause","*");else if(o)if(l.core.s.videojs)try{videojs(o).pause()}catch(e){console.error("lightGallery:- Make sure you have included videojs")}else o.pause();s&&c(s).attr("src",c(s).attr("src").replace("&autoplay","&noplay"));a=l.core.s.dynamic?l.core.s.dynamicEl[i].src:l.core.$items.eq(i).attr("href")||l.core.$items.eq(i).attr("data-src");t=l.core.isVideo(a,i)||{};(t.youtube||t.vimeo||t.dailymotion||t.vk)&&l.core.$outer.addClass("lg-hide-download")}.bind(this)),l.core.$el.on("onAfterSlide.lg.tm",function(e,o){l.core.$slide.eq(o).removeClass("lg-video-playing")}),l.core.s.autoplayFirstVideo&&l.core.$el.on("onAferAppendSlide.lg.tm",function(e,o){var i;l.core.lGalleryOn||(i=l.core.$slide.eq(o),setTimeout(function(){l.loadVideoOnclick(i)},100))})},e.prototype.loadVideo=function(e,o,i,l,a){var t=this,r="",s=1,d="",e=this.core.isVideo(e,l)||{},l=t.core.s.dynamic?t.core.s.dynamicEl[t.core.index].title:t.core.$items.eq(t.core.index).attr("title")||t.core.$items.eq(t.core.index).find("img").first().attr("alt");return l=l?'title="'+l+'"':"",i&&(s=!this.videoLoaded&&this.core.s.autoplayFirstVideo?1:0),e.youtube?(d="?wmode=opaque&autoplay="+s+"&enablejsapi=1",this.core.s.youtubePlayerParams&&(d=d+"&"+c.param(this.core.s.youtubePlayerParams)),r='<iframe allow="autoplay" class="lg-video-object lg-youtube '+o+'" '+l+' width="560" height="315" src="//www.youtube.com/embed/'+e.youtube[1]+d+'" frameborder="0" allowfullscreen></iframe>'):e.vimeo?(d="?autoplay="+s,this.core.s.vimeoPlayerParams&&(d=d+"&"+c.param(this.core.s.vimeoPlayerParams)),r='<iframe allow="autoplay" class="lg-video-object lg-vimeo '+o+'" '+l+' width="560" height="315"  src="//player.vimeo.com/video/'+e.vimeo[1]+d+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'):e.dailymotion?(d="?wmode=opaque&autoplay="+s+"&api=postMessage",this.core.s.dailymotionPlayerParams&&(d=d+"&"+c.param(this.core.s.dailymotionPlayerParams)),r='<iframe allow="autoplay" class="lg-video-object lg-dailymotion '+o+'" '+l+' width="560" height="315" src="//www.dailymotion.com/embed/video/'+e.dailymotion[1]+d+'" frameborder="0" allowfullscreen></iframe>'):e.html5?r=a="."!==(t=a.substring(0,1))&&"#"!==t?a:c(a).html():e.vk&&(d="&autoplay="+s,this.core.s.vkPlayerParams&&(d=d+"&"+c.param(this.core.s.vkPlayerParams)),r='<iframe allow="autoplay" class="lg-video-object lg-vk '+o+'" '+l+' width="560" height="315" src="//vk.com/video_ext.php?'+e.vk[1]+d+'" frameborder="0" allowfullscreen></iframe>'),r},e.prototype.loadVideoOnclick=function(i){var l=this;if(i.find(".lg-object").hasClass("lg-has-poster")&&i.find(".lg-object").is(":visible"))if(i.hasClass("lg-has-video")){var e=i.find(".lg-youtube").get(0),o=i.find(".lg-vimeo").get(0),a=i.find(".lg-dailymotion").get(0),t=i.find(".lg-html5").get(0);if(e)e.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*");else if(o)try{new Vimeo.Player(o).play().catch(function(e){console.error("error playing the video:",e.name)})}catch(e){console.warn("lightGallery:- Make sure you have included https://github.com/vimeo/player.js")}else if(a)a.contentWindow.postMessage("play","*");else if(t)if(l.core.s.videojs)try{videojs(t).play()}catch(e){console.error("lightGallery:- Make sure you have included videojs")}else t.play();i.addClass("lg-video-playing")}else{i.addClass("lg-video-playing lg-has-video");e=function(e,o){if(i.find(".lg-video").append(l.loadVideo(e,"",!1,l.core.index,o)),o)if(l.core.s.videojs)try{videojs(l.core.$slide.eq(l.core.index).find(".lg-html5").get(0),l.core.s.videojsOptions,function(){this.play()})}catch(e){console.error("lightGallery:- Make sure you have included videojs")}else l.core.$slide.eq(l.core.index).find(".lg-html5").get(0).play()},o=(l.core.s.dynamic?e(l.core.s.dynamicEl[l.core.index].src,l.core.s.dynamicEl[l.core.index].html):e(l.core.$items.eq(l.core.index).attr("href")||l.core.$items.eq(l.core.index).attr("data-src"),l.core.$items.eq(l.core.index).attr("data-html")),i.find(".lg-object"));i.find(".lg-video").append(o),i.find(".lg-video-object").hasClass("lg-html5")||(i.removeClass("lg-complete"),i.find(".lg-video-object").on("load.lg error.lg",function(){i.addClass("lg-complete")}))}},e.prototype.destroy=function(){this.videoLoaded=!1},c.fn.lightGallery.modules.video=e});