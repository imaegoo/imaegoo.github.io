<!doctype html><html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="robots" content="noindex"><meta><title>标签: js - 虹墨空间站</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="虹墨空间站"><meta name="msapplication-TileImage" content="/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="虹墨空间站"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="iMaeGoo&amp;#39;s Blog"><meta property="og:type" content="website"><meta property="og:title" content="虹墨空间站"><meta property="og:url" content="https://www.imaegoo.com/"><meta property="og:site_name" content="虹墨空间站"><meta property="og:description" content="iMaeGoo&amp;#39;s Blog"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.imaegoo.com/images/og_image.png"><meta property="article:author" content="iMaeGoo"><meta property="article:tag" content="iMaeGoo,虹墨,博客,blog,hexo,icarus,前端,vue,twikoo"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://www.imaegoo.com/images/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.imaegoo.com"},"headline":"虹墨空间站","image":["https://www.imaegoo.com/images/og_image.png"],"author":{"@type":"Person","name":"iMaeGoo"},"publisher":{"@type":"Organization","name":"虹墨空间站","logo":{"@type":"ImageObject","url":{"light":"/images/logo.png","dark":"/images/logo-dark.png"}}},"description":"iMaeGoo&#39;s Blog"}</script><link rel="alternate" href="/atom.xml" title="虹墨空间站" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/font/fontawesome/css/all.min.css"><link data-pjax rel="stylesheet" href="/js/imaegoo/highlight.js/11.7.0/styles/vs.css"><link data-pjax rel="stylesheet" href="/css/default.css"><script src="https://vercount.one/js" defer="defer"></script><link rel="stylesheet" href="/js/imaegoo/lightgallery/1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="/js/imaegoo/justifiedGallery/3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-RCCCLYKRH5" async></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-RCCCLYKRH5")</script><link rel="stylesheet" href="/js/imaegoo/cookieconsent/3.1.1/build/cookieconsent.min.css"><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><meta name="generator" content="Hexo 7.1.1"></head><body class="is-3-column"><script type="text/javascript" src="/js/imaegoo/night.js"></script><canvas id="universe"></canvas><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img class="logo-img" src="/images/logo.png" alt="虹墨空间站" height="28"><img class="logo-img-dark" src="/images/logo-dark.png" alt="虹墨空间站" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives/">时间轴</a><a class="navbar-item" href="/categories/">分类</a><a class="navbar-item" href="/tags/">标签</a><a class="navbar-item" href="/messages/">留言板</a><a class="navbar-item" href="/friends/">友情链接</a><a class="navbar-item" href="/moments/">友链朋友圈</a><a class="navbar-item" href="/about/">关于</a></div><div class="navbar-end"><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags/">标签</a></li><li class="is-active"><a href="#" aria-current="page">js</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2025-09-01T09:30:00.000Z" title="2025/9/1 17:30:00">2025-09-01</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">1 分钟读完 (大约170个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/monaco-editor-cdn/">CDN 方式引入 Monaco Editor</a></p><div class="content"><p>在前端工程中可以用 <code>@monaco-editor/loader</code> 来引入 Monaco，但有时候我们的前端项目不依赖 Webpack、Vite 等打包工具，如何在普通网页中用纯 CDN 的方式引入 Monaco Editor？</p></div><a class="article-more button is-small is-size-7" href="/2025/monaco-editor-cdn/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2025-04-29T00:00:00.000Z" title="2025/4/29 08:00:00">2025-04-29</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">2 分钟读完 (大约315个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/coze-space-jsx/">将扣子空间生成的 jsx 格式网页部署到自己的服务器</a></p><div class="content"><p>扣子空间生成的网页是 jsx 格式的，在扣子空间内可以正常打开，如果想要部署到自己的服务器，则需要经过编译。</p><p>为此，我写了一个模板，只需将扣子空间生成的 jsx 重命名为 <code>coze.tsx</code>（注意后缀要改为 tsx）放入本项目 <code>src</code> 目录，即可编译出可静态部署的 dist 产物。</p></div><a class="article-more button is-small is-size-7" href="/2025/coze-space-jsx/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2025-03-19T00:00:00.000Z" title="2025/3/19 08:00:00">2025-03-19</time>发表</span><span class="level-item"><time datetime="2025-04-29T00:00:00.000Z" title="2025/4/29 08:00:00">2025-04-29</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">6 分钟读完 (大约855个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/midscene-js/">Midscene.js：AI驱动的自动化测试工具</a></p><div class="content"><p>字节有一个很实用但不怎么火的项目，叫 Midscene.js，Chrome 商店上的安装数仅有 1 万，它是一个由多模态模型驱动的前端自动化测试插件。</p><p>Midscene.js 一共就三大 API：Action、Query、Assert</p><h3 id="Action-交互"><a href="#Action-交互" class="headerlink" title="Action 交互"></a>Action 交互</h3><p>描述步骤并执行交互。例如，在 GitHub 上交互：查找 GitHub 上的 Twikoo 项目，点进详情页，点个 Star——</p></div><a class="article-more button is-small is-size-7" href="/2025/midscene-js/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2025-02-21T00:00:00.000Z" title="2025/2/21 08:00:00">2025-02-21</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">5 分钟读完 (大约711个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/vscode-ext-gold-monitor/">仅需两个文件，实现在 VS Code 状态栏监控黄金价格</a></p><div class="content"><p>最近金价波动剧烈，要是能一边写代码，一边实时监控金价变动，就不会错过高低点了！</p><p>在 <code>C:\Users\你的用户名\.vscode\extensions</code> 新建文件夹 <code>gold-monitor</code>，在文件夹中创建两个文件 <code>package.json</code> 和 <code>extension.js</code>。</p></div><a class="article-more button is-small is-size-7" href="/2025/vscode-ext-gold-monitor/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2024-09-09T08:26:00.000Z" title="2024/9/9 16:26:00">2024-09-09</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">8 分钟读完 (大约1240个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/http-crud-data-from-wps/">使用 HTTP API 从 WPS 在线表格中增删改查数据示例</a></p><div class="content"><p>在 <a href="/2024/http-get-data-from-wps/">使用 HTTP API 从 WPS 在线表格中获取数据</a> 中，我介绍了如何查询数据，本篇将介绍如何利用 AirScript 实现完整的增删改查。</p><p>首先还是在金山文档中创建一个智能表格，在智能表格中创建一个数据表，这里以 “汇率表” 为例。</p></div><a class="article-more button is-small is-size-7" href="/2024/http-crud-data-from-wps/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2024-08-27T10:25:00.000Z" title="2024/8/27 18:25:00">2024-08-27</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">2 分钟读完 (大约272个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/yarn-add-sqlite3/">如何使用 yarn 或 pnpm 安装 sqlite3</a></p><div class="content"><p>Node.js 项目安装 SQLite 时需要下载预编译 bundle，默认是从 github.com 下载的，下载失败会走 node-gyp 本地编译，本地编译一般会因为缺少 Python、Visual Studio、Xcode 等环境而报错，所以需要配置镜像地址。</p></div><a class="article-more button is-small is-size-7" href="/2024/yarn-add-sqlite3/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2024-08-26T12:30:00.000Z" title="2024/8/26 20:30:00">2024-08-26</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">2 分钟读完 (大约304个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/nodejs-abi-version/">Node.js 版本与 ABI 版本对照表</a></p><div class="content"><p>因为下载 node-sass 的 <code>binding.node</code> 预编译二进制包时，发现网上竟然搜不到 Node.js 版本与 ABI 版本的对应关系，所以自己整理一份吧，数据来自三个地方，我做了整合：</p><ol><li><a target="_blank" rel="noopener" href="https://github.com/sass/node-sass/blob/master/lib/extensions.js">https://github.com/sass/node-sass/blob/master/lib/extensions.js</a></li><li><a target="_blank" rel="noopener" href="https://github.com/electron/node-abi/blob/main/abi_registry.json">https://github.com/electron/node-abi/blob/main/abi_registry.json</a></li><li><a target="_blank" rel="noopener" href="https://github.com/electron/node-abi/blob/main/index.js">https://github.com/electron/node-abi/blob/main/index.js</a></li></ol></div><a class="article-more button is-small is-size-7" href="/2024/nodejs-abi-version/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2024-08-26T09:00:00.000Z" title="2024/8/26 17:00:00">2024-08-26</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/windows/">Windows</a></span><span class="level-item">5 分钟读完 (大约738个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/setup-nodejs-without-admin/">非管理员账户如何安装 Node.js 与快速切换版本</a></p><div class="content"><p>在企业环境中的电脑，往往严格管控着管理员权限，无法自由地安装软件。</p><ul><li>如何以普通用户的身份安装 Node.js？</li><li>如何在需要低版本的 Node.js 时快速切换版本而不需要重新安装？</li></ul><blockquote><p>JDK 也适用于这种方式安装！只需多配一个环境变量 <code>JAVA_HOME</code></p></blockquote></div><a class="article-more button is-small is-size-7" href="/2024/setup-nodejs-without-admin/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2024-08-24T09:00:00.000Z" title="2024/8/24 17:00:00">2024-08-24</time>发表</span><span class="level-item"><time datetime="2024-08-26T02:30:00.000Z" title="2024/8/26 10:30:00">2024-08-26</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">12 分钟读完 (大约1747个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/http-get-data-from-wps/">使用 HTTP API 从 WPS 在线表格中获取数据</a></p><div class="content"><p>之前的博文中，我提到过本站的友情链接是通过 Vika 维格表管理的，维格表的一大特色是支持通过 API 增、删、改、查表格中的数据，这直接让维格表化身为一个简单的数据库，可玩性大大提升，通过它维护友链数据，并通过自己编写的脚本生成友链页面就是个例子。</p></div><a class="article-more button is-small is-size-7" href="/2024/http-get-data-from-wps/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2024-06-19T09:42:00.000Z" title="2024/6/19 17:42:00">2024-06-19</time>发表</span><span class="level-item"><time datetime="2024-06-20T02:25:00.000Z" title="2024/6/20 10:25:00">2024-06-20</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">13 分钟读完 (大约1930个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/vslite-offline/">VSLite 原理解析与本地化部署</a></p><div class="content"><p><a target="_blank" rel="noopener" href="https://github.com/kat-tax/vslite">VSLite</a> 是一个开源的、完全运行在浏览器中的开发环境，它的亮点在于，不需要联网也可以直接在浏览器中使用 Node.js、Python、Git 等工具。你可以在 <a target="_blank" rel="noopener" href="https://vslite.dev/">vslite.dev</a> 体验到在线 demo。</p><p><img src="/gallery/2024/vslite-offline-1.png"></p><p>传统的基于云的开发环境，例如 GitHub Codespaces，依赖于后端服务，前端所执行的命令，实际上是通过网络请求发送到后端对应的云虚拟机（或容器）中执行的，这就需要消耗后端的计算资源；而 VSLite 的思路完全不同，它在浏览器中启动了一个容器，做到了不再依赖后端。</p><p>想要在浏览器中跑起来一个容器，第一次听说这样的想法时，我说：不可能！绝对不可能！就浏览器这也受限那也受限的环境，还能跑起来一个操作系统？然而 StackBlitz 真的做到了，他们开发出了 <a target="_blank" rel="noopener" href="https://webcontainers.io/guides/introduction">WebContainers</a>，WebContainers 是一个基于浏览器的运行时，用于执行 Node.js 程序和操作系统命令，完全在浏览器选项卡中。以前需要云虚拟机才能执行的应用，现在可以完全在浏览器端运行。</p><p>经过两天的研究，我开始对 WebContainers 的原理有了初步的了解。</p></div><a class="article-more button is-small is-size-7" href="/2024/vslite-offline/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2024-05-13T09:00:00.000Z" title="2024/5/13 17:00:00">2024-05-13</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/windows/">Windows</a></span><span class="level-item">2 分钟读完 (大约319个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/nodejs-fetch-cert-error/">解决火绒 6.0 造成的 Node.js fetch 方法 unable to verify the first certificate 报错</a></p><div class="content"><p>之前用 Electron 写了一个监控客户端，昨天突然用不成了，检查日志发现这样的一个报错：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Error occurred in handler for &#x27;getPrice&#x27;: TypeError: fetch failed</span><br><span class="line">    at Object.fetch (node:internal/deps/undici/undici:12293:11)</span><br><span class="line">    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)</span><br><span class="line">    at async WebContents.&lt;anonymous&gt; (node:electron/js2c/browser_init:2:78167) &#123;</span><br><span class="line">  cause: Error: unable to verify the first certificate</span><br><span class="line">      at TLSSocket.onConnectSecure (node:_tls_wrap:1659:34)</span><br><span class="line">      at TLSSocket.emit (node:events:514:28)</span><br><span class="line">      at TLSSocket._finishInit (node:_tls_wrap:1070:8)</span><br><span class="line">      at ssl.onhandshakedone (node:_tls_wrap:856:12) &#123;</span><br><span class="line">    code: &#x27;UNABLE_TO_VERIFY_LEAF_SIGNATURE&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><a class="article-more button is-small is-size-7" href="/2024/nodejs-fetch-cert-error/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2023-11-14T09:54:00.000Z" title="2023/11/14 17:54:00">2023-11-14</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">5 分钟读完 (大约809个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/xinghuo-web/">讯飞星火、阿里云通义千问 Web 端调用示例</a></p><div class="content"><p>正在开发一个问答小网页，需要接入大模型，查看了：</p><p>讯飞星火的调用文档: <a target="_blank" rel="noopener" href="https://www.xfyun.cn/doc/spark/Web.html">https://www.xfyun.cn/doc/spark/Web.html</a></p><p>通义千问的调用文档: <a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/dashscope/developer-reference/api-details">https://help.aliyun.com/zh/dashscope/developer-reference/api-details</a></p><p>发现官方文档对于前端浏览器直接调用 API 的示例都写得不够清楚，所以在此重新封装了示例。</p><p>星火用的是 WebSocket 协议，千问用的是 Server-Sent Events，也就是 SSE。</p><p>注意：示例中直接把密钥写进了前端代码，生产环境不推荐这么做，建议通过 nginx 代理等方式将密钥注入请求。</p></div><a class="article-more button is-small is-size-7" href="/2023/xinghuo-web/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2023-10-21T14:45:50.000Z" title="2023/10/21 22:45:50">2023-10-21</time>发表</span><span class="level-item"><time datetime="2023-10-22T06:15:29.000Z" title="2023/10/22 14:15:29">2023-10-22</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">4 分钟读完 (大约548个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/my-friend-page-src/">分享本站友链页源代码</a></p><div class="content"><p>应博友 Inuyasha 的请求，现分享本站友链页源代码如下。</p><h3 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h3><p>自适应浅色主题和深色主题，自适应内容区宽度，自适应电脑、平板、手机。</p></div><a class="article-more button is-small is-size-7" href="/2023/my-friend-page-src/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2023-10-08T10:30:00.000Z" title="2023/10/8 18:30:00">2023-10-08</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/windows/">Windows</a></span><span class="level-item">2 分钟读完 (大约310个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/export-baidu-map-fav/">导出百度地图收藏点列表</a></p><div class="content"><p>打开百度地图 <a target="_blank" rel="noopener" href="https://map.baidu.com/fav/">https://map.baidu.com/fav/</a>，登录自己的账号，按 F12 打开控制台，点击 Network，再按 F5 刷新页面，在 Filter 中输入 <code>favdata</code>，即可筛选出收藏点的 API 接口。如果你的收藏点多于 100 个，你会筛选出多个请求。依次点击每个请求，点击 Preview，展开 sync - newdata，右键 newdata，点击 Copy object 即可复制出来收藏数据。</p></div><a class="article-more button is-small is-size-7" href="/2023/export-baidu-map-fav/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2023-07-12T02:49:43.000Z" title="2023/7/12 10:49:43">2023-07-12</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">几秒读完 (大约105个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/kylin-electron-timezone/">解决 Electron 应用在国产信创 Kylin 系统下 new Date() 时区错误的问题</a></p><div class="content"><p>在做客户端国产化改造时，发现页面上的时间全都差了 8 个小时，打开控制台打印 <code>new Date()</code> 显示的时区是 GMT，进一步测试发现，只有 Kylin 桌面系统上有这个问题，统信 UOS 系统没问题，解决方法很简单，在程序启动前手动指定时区。</p><figure class="highlight ts"><figcaption><span>main.ts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">process.<span class="property">env</span>.<span class="property">TZ</span> = <span class="string">&#x27;Asia/Shanghai&#x27;</span>;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2023-05-12T02:03:37.000Z" title="2023/5/12 10:03:37">2023-05-12</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">3 分钟读完 (大约426个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/electron-forge-try/">electron-forge 流水线踩坑记录</a></p><div class="content"><h3 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h3><ol><li>环境变量 PATH 需包含 node、git 的可执行文件目录</li><li>在中国大陆跑，建议替换阿里镜像源提升依赖安装速度</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">registry=https://registry.npmmirror.com/</span><br><span class="line">ELECTRON_MIRROR=https://npmmirror.com/mirrors/electron/</span><br><span class="line">NODEJS_ORG_MIRROR=https://npmmirror.com/mirrors/node/</span><br></pre></td></tr></table></figure></div><a class="article-more button is-small is-size-7" href="/2023/electron-forge-try/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2023-04-12T07:09:16.000Z" title="2023/4/12 15:09:16">2023-04-12</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">2 分钟读完 (大约348个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/vue2-emit/">Vue 2 this.$emit 方法无效问题的解决</a></p><div class="content"><p>分享一个 Vue 2 <code>$emit</code> 不生效问题的解决，子组件向父组件 <code>$emit</code> 事件，没有报错，但父组件就是收不到事件。首先排除拼错事件名称等基本错误。</p><p>最终发现原因是：由于我将 <code>$emit</code> 写在了异步方法里，子组件在还没 <code>$emit</code> 之前就销毁了，此时再调用 <code>$emit</code> 不会有任何报错，也不会有任何效果，特此记录。</p></div><a class="article-more button is-small is-size-7" href="/2023/vue2-emit/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2023-03-10T02:14:53.000Z" title="2023/3/10 10:14:53">2023-03-10</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">1 分钟读完 (大约138个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/yarn-workspace/">初识 monorepo，用 yarn 搭建一个 monorepo 项目</a></p><div class="content"><h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- package.json</span><br><span class="line">- packages</span><br><span class="line">  - core</span><br><span class="line">    - package.json</span><br><span class="line">  - bridge</span><br><span class="line">    - package.json</span><br><span class="line">  - shared</span><br><span class="line">    - package.json</span><br></pre></td></tr></table></figure></div><a class="article-more button is-small is-size-7" href="/2023/yarn-workspace/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2023-01-05T13:00:00.000Z" title="2023/1/5 21:00:00">2023-01-05</time>发表</span><span class="level-item"><time datetime="2023-03-31T02:57:34.000Z" title="2023/3/31 10:57:34">2023-03-31</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/backend/">BackEnd</a></span><span class="level-item">6 分钟读完 (大约901个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/puppeteer-note/">Puppeteer 踩坑笔记</a></p><div class="content"><p>Puppeteer 是最常见的服务端 Node.js 网页转 PDF 工具库之一，原理是启动 Chromium 无头模式，打开网页，输出PDF，由于其原理是直接操控浏览器，导出的 PDF 几乎和网页效果一致。本篇记录一下踩坑经历。</p><p>我的 Puppeteer 版本：<code>19.4.1</code></p><h3 id="无法安装-puppeteer"><a href="#无法安装-puppeteer" class="headerlink" title="无法安装 puppeteer"></a>无法安装 puppeteer</h3><ol><li>Node.js 要求 <code>&gt;=14.1.0</code></li><li>Puppeteer 安装过程中默认访问 Google 服务器下载 Chromium 安装包，建议切换到阿里源进行安装。</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> PUPPETEER_DOWNLOAD_HOST=https://registry.npmmirror.com/-/binary</span><br></pre></td></tr></table></figure></div><a class="article-more button is-small is-size-7" href="/2023/puppeteer-note/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2022-06-27T05:00:00.000Z" title="2022/6/27 13:00:00">2022-06-27</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">4 分钟读完 (大约596个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/xlsx-js/">纯前端实现 Excel 表格的读取与生成（json 转 xlsx，xlsx 转 json）</a></p><div class="content"><h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><p>利用现有的查询和新增接口，如何在不改后端的情况下给页面增加导入和导出功能？</p><p>前端查询到数据，可以生成 xlsx 文件吗？</p><p>前端可以读取用户选择的 xlsx 文件，然后调用新增接口向后端写入数据吗？</p><p>可以！</p></div><a class="article-more button is-small is-size-7" href="/2022/xlsx-js/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2022-03-07T01:00:00.000Z" title="2022/3/7 09:00:00">2022-03-07</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">13 分钟读完 (大约1981个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/js-regexp/">JavaScript 正则表达式学习</a></p><div class="content"><p>本文作者: ych6666<br>原文链接: <a target="_blank" rel="noopener" href="https://blog.csdn.net/ych6666/article/details/122958097">https://blog.csdn.net/ych6666/article/details/122958097</a></p><p>正则表达式作用:<br>描述了一个规则，通过这个规则可以匹配一类字符串。<br>完成字符串的查找、验证和替换</p></div><a class="article-more button is-small is-size-7" href="/2022/js-regexp/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2022-02-17T10:34:00.000Z" title="2022/2/17 18:34:00">2022-02-17</time>发表</span><span class="level-item"><time datetime="2022-02-24T05:34:00.000Z" title="2022/2/24 13:34:00">2022-02-24</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">3 分钟读完 (大约434个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/twikoo-data-export/">Twikoo 评论数据导出教程</a></p><div class="content"><p>因为数据库导出还算方便，所以 Twikoo 没有提供内置的数据导出功能。想要导出数据的话，首先确认自己部署 Twikoo 所用的方式，然后参考下面的教程。</p></div><a class="article-more button is-small is-size-7" href="/2022/twikoo-data-export/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2021-09-26T04:55:00.000Z" title="2021/9/26 12:55:00">2021-09-26</time>发表</span><span class="level-item"><time datetime="2022-02-22T04:55:00.000Z" title="2022/2/22 12:55:00">2022-02-22</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">1 分钟读完 (大约136个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/node-modules-speed-up/">浅析各家包管理工具是如何解决 npm 安装慢的痛点的</a></p><div class="content"><p>贴 PPT，正文待补充。</p></div><a class="article-more button is-small is-size-7" href="/2021/node-modules-speed-up/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2021-07-08T04:55:00.000Z" title="2021/7/8 12:55:00">2021-07-08</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">2 分钟读完 (大约277个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/twikoo-lightgallery/">集成 Twikoo 与 lightGallery 插件，实现评论图片的点击放大</a></p><div class="content"><p>Twikoo 文档页和本站的评论区，支持评论图片点击放大，你现在就可以就下拉到本文评论区试一试！</p><h3 id="为什么-Twikoo-没有官方支持图片点击放大？"><a href="#为什么-Twikoo-没有官方支持图片点击放大？" class="headerlink" title="为什么 Twikoo 没有官方支持图片点击放大？"></a>为什么 Twikoo 没有官方支持图片点击放大？</h3><ol><li>会增加包体大小</li><li>涉及 body DOM 节点操作，为了不影响在不同主题下的显示效果，需要杜绝这类操作</li><li>lightGallery 库是 GPLv3 协议的</li></ol><h3 id="我就想要实现图片点击放大功能！"><a href="#我就想要实现图片点击放大功能！" class="headerlink" title="我就想要实现图片点击放大功能！"></a>我就想要实现图片点击放大功能！</h3><p>首先需要你拥有修改博客主题的能力。</p></div><a class="article-more button is-small is-size-7" href="/2021/twikoo-lightgallery/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2021-05-20T04:55:00.000Z" title="2021/5/20 12:55:00">2021-05-20</time>发表</span><span class="level-item"><time datetime="2021-06-09T04:55:00.000Z" title="2021/6/9 12:55:00">2021-06-09</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">2 分钟读完 (大约233个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/twikoo-path/">Twikoo 多个页面共用一个评论区</a></p><div class="content"><p>有时候博主希望多个页面共用一个评论区，我们可以自定义 path 做到这一点。</p><p>首先要确定自己所用的博客主题支持 Twikoo path 配置，否则需要自己修改主题源码添加 path 配置。</p><p>设置主题的 Twikoo path 配置为 <code>window.TWIKOO_MAGIC_PATH||window.location.pathname</code></p><p>然后在所有需要共用评论区的页面正文中增加以下代码 <code>&lt;script&gt;window.TWIKOO_MAGIC_PATH=&quot;评论区名称&quot;&lt;/script&gt;</code></p><p>把中间的“评论区名称”替换为你指定的名称，共用的页面请起 <strong>相同的</strong> 评论区名称，其他页面不做改动即可。</p><p>试试看！</p></div><a class="article-more button is-small is-size-7" href="/2021/twikoo-path/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2021-05-10T04:55:00.000Z" title="2021/5/10 12:55:00">2021-05-10</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">3 分钟读完 (大约429个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/js-anti-debugger/">JS 反审查学习笔记</a></p><div class="content"><p>前端网页如何避免被访客审查元素？总结以下方法，未来有新的想法也会记录在此篇文章里。</p></div><a class="article-more button is-small is-size-7" href="/2021/js-anti-debugger/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2021-02-26T04:55:00.000Z" title="2021/2/26 12:55:00">2021-02-26</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">5 分钟读完 (大约762个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/js-promise-exam/">Javascript Promise 20 题，加深理解 Promise</a></p><div class="content"><h3 id="0x00"><a href="#0x00" class="headerlink" title="0x00"></a>0x00</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">1</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure></div><a class="article-more button is-small is-size-7" href="/2021/js-promise-exam/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-12-24T04:30:00.000Z" title="2020/12/24 12:30:00">2020-12-24</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/serverless/">Serverless</a></span><span class="level-item">5 分钟读完 (大约734个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/tcb-functions-async/">腾讯云云开发云函数 之 异步执行，提前返回</a></p><div class="content"><p>云函数的特性是，当 <code>main</code> 函数 return 时，执行进程会被立即冻结。这一点在官方文档<a target="_blank" rel="noopener" href="https://docs.cloudbase.net/cloud-function/deep-principle.html#node-js-8-de-yi-bu-xing-wei">Node.js 8 的异步行为</a>中有提到。</p><blockquote><p>对于异步函数，主流程执行完成后，函数实例进程会<strong>被冻结</strong>，进程中的所有异步任务会暂停执行，直到这个进程被再次唤起。<br>另一方面，如果函数实例进程由于某些原因<strong>没被复用</strong>（例如更新了函数代码），这个异步流程中的代码就<strong>永远不会被执行</strong>。</p></blockquote><p>但是有些场景下，云函数需要很长的执行时间，例如，Twikoo 通过 Akismet 检测垃圾评论的过程。按照特性，在检测过程结束前，就不能异步检测，提前返回结果给前端，否则检测进程就会被冻结，导致检测失败。我们只能 await 同步检测，造成请求响应慢，用户体验差。</p><p>按照 Java 的习惯，我们会启动新的线程执行长时间的任务，在云函数中怎样实现？</p></div><a class="article-more button is-small is-size-7" href="/2020/tcb-functions-async/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-12-10T09:00:00.000Z" title="2020/12/10 17:00:00">2020-12-10</time>发表</span><span class="level-item"><time datetime="2020-12-10T09:30:00.000Z" title="2020/12/10 17:30:00">2020-12-10</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/serverless/">Serverless</a></span><span class="level-item">4 分钟读完 (大约659个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/tcb-functions-upload/">腾讯云云开发云函数 之 文件导入功能</a></p><div class="content"><h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>Twikoo 评论系统要实现导入功能，导入，就需要上传文件。</p><p>通过调用云函数，我们能够传递 string、number 等简单的参数，想要上传文件？不太行。</p><p>想到云开发环境有一块默认开通的 COS 空间，这块空间允许登录用户上传文件，只要利用这片空间，就可以实现将文件上传给云函数的功能了。</p><h3 id="主要思路"><a href="#主要思路" class="headerlink" title="主要思路"></a>主要思路</h3><ol><li>前端调用 js-sdk 上传文件，获取到 fileID</li><li>前端将 fileID 作为参数，调用云函数</li><li>云函数通过 fileID 获取到文件，并解析</li></ol></div><a class="article-more button is-small is-size-7" href="/2020/tcb-functions-upload/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-10-30T05:00:00.000Z" title="2020/10/30 13:00:00">2020-10-30</time>发表</span><span class="level-item"><time datetime="2020-12-10T09:30:00.000Z" title="2020/12/10 17:30:00">2020-12-10</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/serverless/">Serverless</a></span><span class="level-item">3 分钟读完 (大约476个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/tcb-functions-dry/">腾讯云云开发云函数 之 代码共用</a></p><div class="content"><p>腾讯云云开发云函数的<a target="_blank" rel="noopener" href="https://docs.cloudbase.net/faq/functions.html">文档</a>中写道——</p><blockquote><p>不同的云函数可以共用代码文件（目录）吗<br>未上线</p></blockquote><p>如果是简单的云函数，这一点还能接受，在开发 Twikoo 评论系统的过程中，云函数要实现的 API 越来越多，逐渐让我发现了它的弊端：</p><ol><li>大量的代码复制！</li><li>版本管理非常不便！</li><li>依赖管理非常不便！</li><li>一次要部署十来个云函数，很麻烦！</li><li>每个云函数都有独立的冷启动时间，很慢！</li></ol><p>显然违反了开发的 DRY 原则，这迫使我开始思考解决方案。</p><p>正常的思维是，一个 API 写一个云函数，如果将云函数合并，用一个云函数实现不同的功能，能否解决这样的问题呢？</p></div><a class="article-more button is-small is-size-7" href="/2020/tcb-functions-dry/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-09-05T07:35:00.000Z" title="2020/9/5 15:35:00">2020-09-05</time>发表</span><span class="level-item"><time datetime="2020-09-15T02:41:00.000Z" title="2020/9/15 10:41:00">2020-09-15</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">1 分钟读完 (大约220个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/hello-twikoo/">博客已启用 Twikoo 评论系统</a></p><div class="content"><p>评论系统一直是静态网站的痛点。</p><ul><li>Valine：安全性不高</li><li>Gitalk：需要评论者注册Github</li><li>Disqus：需要注册，国内访问不畅</li><li>畅言：广告多，需要验证手机号</li></ul><p>难道就没有一个完美的方案？</p><p>在<del>咕咕咕了</del>近三个月后，我自己搞出了一套评论系统，并命名为 Twikoo。</p><ul><li>成本上，腾讯云云开发环境可以<strong>免费搭建</strong></li><li>安全性上，使用腾讯云云函数开发接口，不开放一丁点数据库权限，未来更新将接入 Akismet 反垃圾检查</li><li>易用性上，支持点赞、邮件通知、微信通知（限博主），未来会增加更多玩法</li></ul><p>欢迎访问 <a target="_blank" rel="noopener" href="https://twikoo.js.org/">twikoo.js.org</a> 了解更多。</p></div><a class="article-more button is-small is-size-7" href="/2020/hello-twikoo/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-08-08T03:05:00.000Z" title="2020/8/8 11:05:00">2020-08-08</time>发表</span><span class="level-item"><time datetime="2020-09-03T05:27:00.000Z" title="2020/9/3 13:27:00">2020-09-03</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">4 分钟读完 (大约609个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/valine-private/">Valine 1.4 如何保护评论者的邮箱和 IP</a></p><div class="content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>AyagawaSeirin 提出了一个 Valine 隐私安全漏洞，<a target="_blank" rel="noopener" href="https://github.com/xCss/Valine/issues/336">发送请求中响应内容明文暴露评论者IP、邮箱等隐私内容</a>，所以我就去查了一下 LeanCloud 文档，发现可以<a target="_blank" rel="noopener" href="https://leancloud.cn/docs/data_security.html#hash723958571">手动更改字段权限</a>，但是，如果设置 <code>mail</code> 客户端不可见，将不会显示评论者的 Gravatar，转为显示默认头像，因为原版是取到明文邮箱后再转 MD5 取头像的。想到的解决办法是新增一个可见字段存储 mail 的 MD5，需要改 Valine 源码，还需要处理现有数据。</p><p>以下是我实现的魔改版本，基于 Valine.min.js 版本 1.4.14 修改。该魔改版新增一个可见字段（<code>mailMd5</code>）存储 mail 的 MD5，并提供了脚本处理现有评论数据。</p></div><a class="article-more button is-small is-size-7" href="/2020/valine-private/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-08-01T03:34:00.000Z" title="2020/8/1 11:34:00">2020-08-01</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">3 分钟读完 (大约458个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/h5-smooth-scroll/">PC 浏览器平滑惯性滚动（smooth scroll）一套简单实现</a></p><div class="content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>主要是 Bing 找了许多 libraries。效果在 Chrome for Windows 上都不理想，要么滚动很生硬，要么就是太复杂，就自己实现了。</p><p>本来是 PC only 的，写好后测试了一下移动端，是兼容的，效果也还不错……</p><p><em>不过反正移动端都自带惯性滑动了</em></p><h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><div class="columns" style="width:100%"><div class="column"><h3 id="无惯性滚动">无惯性滚动</h3><div class="ss-container"><div class="ss-box" style="background-color:#0067a6"></div><div class="ss-box" style="background-color:#00abd8"></div><div class="ss-box" style="background-color:#008972"></div><div class="ss-box" style="background-color:#efc028"></div><div class="ss-box" style="background-color:#f2572d"></div></div></div><div class="column"><h3 id="有惯性滚动">有惯性滚动</h3><div class="ss-container" id="smooth-scrollable"><div class="smooth-scroll"><div class="ss-container-body" id="smooth-target"><div class="ss-box" style="background-color:#0067a6"></div><div class="ss-box" style="background-color:#00abd8"></div><div class="ss-box" style="background-color:#008972"></div><div class="ss-box" style="background-color:#efc028"></div><div class="ss-box" style="background-color:#f2572d"></div></div></div><div class="ss-container-hitbox"></div></div></div></div><style>.ss-container{width:100%;height:500px;position:relative;overflow-y:auto}.ss-container.smooth{overflow-y:hidden}.ss-container-body{width:100%;position:absolute;transition:transform 1s cubic-bezier(.23,1,.32,1)}.ss-container-hitbox{width:100%;height:1500px}.ss-box{width:100%;height:300px}.smooth-scroll{position:-webkit-sticky;position:sticky;top:0;width:100%}</style><script>
document.getElementById('smooth-scrollable').onscroll = (e) => {
  const target = e.currentTarget
  document.getElementById('smooth-target').style.transform = `translateY(-${target.scrollTop}px)`
}
</script></div><a class="article-more button is-small is-size-7" href="/2020/h5-smooth-scroll/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-07-22T01:55:00.000Z" title="2020/7/22 09:55:00">2020-07-22</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">2 分钟读完 (大约290个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/edge-error/">解决 Edge 浏览器 SCRIPT5022: Exception thrown and not caught</a></p><div class="content"><p>JS 代码在 Safari, Chrome, Firefox 都是好的，就只有 Edge 莫名其妙地报错。</p><p><img src="/gallery/2020/edge-error-1.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SCRIPT5022: Exception thrown and not caught</span><br></pre></td></tr></table></figure><p>未捕获的异常？EXM？你倒是说是什么异常啊？行号还是错的？点过去无法定位错误位置？<code>hash-navigation.js</code>？我的项目里根本都没有这个 js 啊喂！</p></div><a class="article-more button is-small is-size-7" href="/2020/edge-error/#more">阅读更多</a></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2020/icarus-insight-pinyin/"><img class="fill" src="/gallery/vector/eezy_64.svg" alt="让 Icarus Insight 搜索插件支持拼音检索文章" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-05-09T07:06:38.000Z" title="2020/5/9 15:06:38">2020-05-09</time>发表</span><span class="level-item"><time datetime="2020-07-25T15:41:38.000Z" title="2020/7/25 23:41:38">2020-07-25</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">17 分钟读完 (大约2559个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/icarus-insight-pinyin/">让 Icarus Insight 搜索插件支持拼音检索文章</a></p><div class="content"><p>要是 Icarus 能用拼音搜文章就好了，如果你也有这样的想法，那这篇文章也许会对你有帮助。</p><h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><img src="/gallery/2020/icarus-insight-pinyin.png" style="border:1px solid #dbdbdb"><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><ol><li>Icarus 版本 3.0 以上</li><li>搜索插件使用的是 Insight</li></ol></div><a class="article-more button is-small is-size-7" href="/2020/icarus-insight-pinyin/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-04-11T18:24:05.000Z" title="2020/4/12 02:24:05">2020-04-12</time>发表</span><span class="level-item"><time datetime="2020-05-23T02:47:05.000Z" title="2020/5/23 10:47:05">2020-05-23</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">8 分钟读完 (大约1162个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/valine-nick-mail-required/">Valine 升级 1.4 以及增加判断 “昵称和邮箱不能为空”</a></p><div class="content"><blockquote><p>如果你和我一样只是想在 1.3.10 原版的基础上增加昵称和邮箱的防空验证，可以直接下划到结尾部分，跳过前半部分的过程记录。</p></blockquote><p>最近经受匿名评论的困扰，计划禁止匿名评论。还有一个原因是《<a target="_blank" rel="noopener" href="http://politics.people.com.cn/n1/2017/0825/c1001-29494919.html">网信办：网站不得向未实名认证的用户提供跟帖评论服务</a>》，咱小小博客也是备过案的（能用国内 CDN 加速太香了），应该注意一下是不是？</p><p>很遗憾，<a target="_blank" rel="noopener" href="https://github.com/xCss/Valine/issues/143#issuecomment-449671533">Valine 作者不计划添加这一功能</a>！这让我一度想要换评论系统了……先不谈数据转移，我对比了一下其他评论系统——</p><ul><li>Discuz 系，国内连通率堪忧，不行；</li><li>基于 GitHub Issue 的，需要 GitHub 授权，对访客不是很友好，国内速度也不快，不行；</li><li>还有国内的畅言，要备案好说，但是 UI 不好看，还要验证访客手机号、绑定微信一大堆，麻烦不说，重要的是泄露访客隐私，不行……</li></ul><p>昨天发现 Valine 1.4 发布，有几个新特性挺喜欢，打算升级，想起这茬，干脆一起把防空校验加上吧！</p></div><a class="article-more button is-small is-size-7" href="/2020/valine-nick-mail-required/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-03-26T14:33:17.000Z" title="2020/3/26 22:33:17">2020-03-26</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/backend/">BackEnd</a></span><span class="level-item">4 分钟读完 (大约644个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/chinese-name-regexp/">理解 Javascript，PHP，SQL 匹配中文姓名正则表达式的区别</a></p><div class="content"><h3 id="如何定义合法姓名"><a href="#如何定义合法姓名" class="headerlink" title="如何定义合法姓名"></a>如何定义合法姓名</h3><p>中文姓名非常多样化，想要真正区别出姓名和非姓名非常困难，但在这篇文章中，作为前提，我们认为合法的中文姓名由 1~10 个中文字符组成。</p><h3 id="Javascript"><a href="#Javascript" class="headerlink" title="Javascript"></a>Javascript</h3><p>知道了这个前提，容易得出 JS 的正则表达式——</p><figure class="highlight js"><figcaption><span>姓名正则</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/^([\u4e00-\u9fa5]&#123;<span class="number">1</span>,<span class="number">10</span>&#125;)$/</span><br></pre></td></tr></table></figure></div><a class="article-more button is-small is-size-7" href="/2020/chinese-name-regexp/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-03-13T02:35:29.000Z" title="2020/3/13 10:35:29">2020-03-13</time>发表</span><span class="level-item"><time datetime="2020-03-13T08:40:00.000Z" title="2020/3/13 16:40:00">2020-03-13</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">6 分钟读完 (大约865个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/icarus-3-guide/">hexo-theme-icarus 3 食用经验分享</a></p><div class="content"><p>昨天晚上 Icarus 主题的 RC 版本发布，离正式版不远了，我自 <code>3.0.0-beta.1</code> 一路使用到现在，把自己的使用经验分享一下。</p><h3 id="魔改迁移"><a href="#魔改迁移" class="headerlink" title="魔改迁移"></a>魔改迁移</h3><p>由于主题作者换掉了 ejs 语言，全部重写了一遍，迁移这块的难度是最大的。</p><p>拉 dev 分支，冲突实在是太多了，我的办法是，把在旧版上的魔改的整个 diff 导出，然后直接从 dev 签出一个新的分支，参考 diff 对每个文件都重新修改，花了不到2个小时搞定。</p><h3 id="魔改-hexo-component-inferno-组件"><a href="#魔改-hexo-component-inferno-组件" class="headerlink" title="魔改 hexo-component-inferno 组件"></a>魔改 hexo-component-inferno 组件</h3><p>主题中部分可重用的 JS 和 JSX 代码已经被移到另一个项目 <code>hexo-component-inferno</code> 中，我们如何对这些组件魔改？此时要分2种情况——</p><ol><li>widgets 的魔改</li><li>其它 JS 和 JSX 的魔改</li></ol></div><a class="article-more button is-small is-size-7" href="/2020/icarus-3-guide/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-01-19T05:36:42.000Z" title="2020/1/19 13:36:42">2020-01-19</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">2 分钟读完 (大约293个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/vue-cli-service-is-not-recognized/">多种方式解决 Windows CMD 中 vue-cli-service 不是内部或外部命令</a></p><div class="content"><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><p>已安装 Vue 脚手架</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></figure><h3 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h3><p>找不到 <code>vue-cli-service</code> 命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;vue-cli-service&#x27; is not recognized as an internal or external command, operable program or batch file.</span><br></pre></td></tr></table></figure><p>经过搜索，发现这个问题只在 Windows 下存在。</p><p>装了脚手架应该会在 node 目录产生 <code>vue-cli-service.cmd</code> 的文件，实际没有产生，不过在全局 <code>node_modules</code> 下是有的。</p><p><img src="/gallery/2020/vue-cli-service-is-not-recognized-1.png"></p><p><img src="/gallery/2020/vue-cli-service-is-not-recognized-2.png"></p><p>有说清理 <code>node_modules</code> 重新安装可以解决的，试了不管用，全局卸载脚手架重新安装也不管用，就算管用也比较麻烦，于是我找到了几个间接使用方法——</p></div><a class="article-more button is-small is-size-7" href="/2020/vue-cli-service-is-not-recognized/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-01-17T09:36:42.000Z" title="2020/1/17 17:36:42">2020-01-17</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">1 分钟读完 (大约161个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/vue-i18n-unit-test/">Vue 给 i18n 国际化组件写单元测试报 $t is not a function</a></p><div class="content"><p>对一个有国际化的 Vue 组件写单元测试，mount这个组件时，会遇到找不到 <code>$t</code> 的报错。</p><figure class="highlight html"><figcaption><span>Component template</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; $t(&#x27;message.hello&#x27; &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TypeError: _vm.$t is not a function</span><br></pre></td></tr></table></figure></div><a class="article-more button is-small is-size-7" href="/2020/vue-i18n-unit-test/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-01-07T08:22:50.000Z" title="2020/1/7 16:22:50">2020-01-07</time>发表</span><span class="level-item"><time datetime="2020-01-08T07:22:50.000Z" title="2020/1/8 15:22:50">2020-01-08</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">2 分钟读完 (大约346个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/vue-remove-query-from-router/">Vue Router 向 URL query 添加、删除参数</a></p><div class="content"><h3 id="添加一个参数"><a href="#添加一个参数" class="headerlink" title="添加一个参数"></a>添加一个参数</h3><p>当前 URL：<code>http://localhost/home?keyword=example</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">replace</span>(&#123; <span class="attr">query</span>: &#123; ...<span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">query</span>, <span class="attr">code</span>: <span class="string">&#x27;1&#x27;</span> &#125; &#125;)</span><br></pre></td></tr></table></figure><p>最终 URL：<code>http://localhost/home?keyword=example&amp;code=1</code></p><h3 id="删除一个参数"><a href="#删除一个参数" class="headerlink" title="删除一个参数"></a>删除一个参数</h3><p>我所使用的 Vue Router 版本为 3.0.3，删除参数比较麻烦。</p><p>当前 URL：<code>http://localhost/home?keyword=example&amp;code=1</code></p><figure class="highlight js"><figcaption><span>无效方法</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">query</span>.<span class="property">code</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">replace</span>(&#123; <span class="attr">query</span>: <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">query</span> &#125;) <span class="comment">// 地址栏无反应</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><figcaption><span>有效方法</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> newQuery = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">query</span>)) <span class="comment">// 深拷贝</span></span><br><span class="line"><span class="keyword">delete</span> newQuery.<span class="property">code</span></span><br><span class="line"><span class="comment">// 如果有引入 lodash, 可以写成: let newQuery = _.omit(this.$route.query, &#x27;code&#x27;)</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">replace</span>(&#123; <span class="attr">query</span>: newQuery &#125;)</span><br></pre></td></tr></table></figure><p>最终 URL：<code>http://localhost/home?keyword=example</code></p></div><a class="article-more button is-small is-size-7" href="/2020/vue-remove-query-from-router/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-01-02T10:06:32.000Z" title="2020/1/2 18:06:32">2020-01-02</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">5 分钟读完 (大约781个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/vue-lottery/">Vue.js 做一个大屏幕抽奖</a></p><div class="content"><p>在 Github 上面搜索 “lottery”，发现类似的项目挺多的，有 Electron 实现的，可以打包成 exe，也有原生 js 实现的，浏览器打开。</p><p>这次是用 Vue 做了一个编号抽奖，一个转盘抽奖，放在一起，练手。</p><p><img src="/gallery/2020/vue-lottery-3.png"></p><p><img src="/gallery/2020/vue-lottery-1.png"></p><p><img src="/gallery/2020/vue-lottery-2.png"></p><p>预览：<a target="_blank" rel="noopener" href="http://lottery.imaegoo.com/">http://lottery.imaegoo.com/</a></p></div><a class="article-more button is-small is-size-7" href="/2020/vue-lottery/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-11-26T02:24:14.000Z" title="2019/11/26 10:24:14">2019-11-26</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">4 分钟读完 (大约666个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/van-list-always-load/">van-list 一直触发加载问题的排查</a></p><div class="content"><p>移动端分页一般都是向下滑动加载更多，Vant 组件库提供了 van-list 来实现这一功能。</p><blockquote><p>List 组件通过<code>loading</code>和<code>finished</code>两个变量控制加载状态，当组件滚动到底部时，会触发<code>load</code>事件并将<code>loading</code>设置成<code>true</code>。此时可以发起异步操作并更新数据，数据更新完毕后，将<code>loading</code>设置成<code>false</code>即可。若数据已全部加载完毕，则直接将<code>finished</code>设置成<code>true</code>即可。</p></blockquote><p>实际应用中发现，即使内部元素已经填满一整屏，仍然会触发加载，直到我模拟的20多页全部加载完才停下来。</p><p>我没有给这个问题写专门的 CodePen demo，比较麻烦，碰到的人也不一定多。</p><h3 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h3><p>van-list 会在内容之后增加一个 placeholder，通过 placeholder 的位置判断内容是否已填充满屏。<br>van-list 本身为 flex 布局时，flex-direction 必须是 column（或 column-reverse）。</p><h3 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h3><p>首先我的用法是这样的：</p><figure class="highlight html"><figcaption><span>template</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-list</span>&gt;</span> <span class="comment">&lt;!-- flex --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-grid</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-grid-item</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-grid-item</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-grid-item</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-grid</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-list</span>&gt;</span></span><br></pre></td></tr></table></figure><p>首先看文档，英文文档没有提到，但<a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/list">中文文档</a>有以下一段话：</p><blockquote><p><strong>使用 float 布局后一直触发加载？</strong><br>若 List 的内容使用了 float 布局，可以在容器上添加van-clearfix类名来清除浮动，使得 List 能正确判断元素位置</p></blockquote><p>检查了一下，我没有在使用 float 布局呀。</p></div><a class="article-more button is-small is-size-7" href="/2019/van-list-always-load/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-10-25T05:44:14.000Z" title="2019/10/25 13:44:14">2019-10-25</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">1 分钟读完 (大约168个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/js-deep-copy/">JS 原生对象与数组拷贝</a></p><div class="content"><h3 id="浅拷贝单层对象"><a href="#浅拷贝单层对象" class="headerlink" title="浅拷贝单层对象"></a>浅拷贝单层对象</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&quot;1&quot;</span> &#125;</span><br><span class="line"><span class="keyword">let</span> copyOfObj = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, obj)</span><br></pre></td></tr></table></figure><h3 id="深拷贝多层对象"><a href="#深拷贝多层对象" class="headerlink" title="深拷贝多层对象"></a>深拷贝多层对象</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">  <span class="attr">tag</span>: [<span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;javascript&#x27;</span>],</span><br><span class="line">  <span class="attr">category</span>: &#123; <span class="attr">id</span>: <span class="number">1001</span>, <span class="attr">title</span>: <span class="string">&#x27;frontend&#x27;</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> copyOfObj = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj))</span><br></pre></td></tr></table></figure><h3 id="浅拷贝简单类型数组"><a href="#浅拷贝简单类型数组" class="headerlink" title="浅拷贝简单类型数组"></a>浅拷贝简单类型数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> copyOfArr = [...arr]</span><br></pre></td></tr></table></figure><h3 id="深拷贝单层对象组成的数组"><a href="#深拷贝单层对象组成的数组" class="headerlink" title="深拷贝单层对象组成的数组"></a>深拷贝单层对象组成的数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&quot;1&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">title</span>: <span class="string">&quot;2&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">title</span>: <span class="string">&quot;3&quot;</span> &#125;</span><br><span class="line">]</span><br><span class="line"><span class="keyword">let</span> copyOfArr1 = arr.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, item))</span><br><span class="line"><span class="keyword">let</span> copyOfArr2 = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(arr))</span><br></pre></td></tr></table></figure><h3 id="深拷贝多层对象组成的数组"><a href="#深拷贝多层对象组成的数组" class="headerlink" title="深拷贝多层对象组成的数组"></a>深拷贝多层对象组成的数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&quot;1&quot;</span>, <span class="attr">subObj</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;subObj1&#x27;</span> &#125; &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">title</span>: <span class="string">&quot;2&quot;</span>, <span class="attr">subObj</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;subObj2&#x27;</span> &#125; &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">title</span>: <span class="string">&quot;3&quot;</span>, <span class="attr">subObj</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;subObj3&#x27;</span> &#125; &#125;</span><br><span class="line">]</span><br><span class="line"><span class="keyword">let</span> copyOfArr1 = arr.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(item)))</span><br><span class="line"><span class="keyword">let</span> copyOfArr2 = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(arr))</span><br></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>不考虑性能的情况下，<code>JSON.parse(JSON.stringify(value))</code>是最简最万能的拷贝。</p></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2019/vue-model-not-work/"><img class="fill" src="/gallery/2019/vue.jpg" alt="直接操作 Vue data 中不存在的属性导致的 v-model 绑定异常问题" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-10-24T12:10:50.000Z" title="2019/10/24 20:10:50">2019-10-24</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">4 分钟读完 (大约589个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/vue-model-not-work/">直接操作 Vue data 中不存在的属性导致的 v-model 绑定异常问题</a></p><div class="content"><p>初学Vue遇到的问题，尝试了几个小时才搞明白，大佬应该一眼就能看出什么问题吧……</p><p>需要注意，不要直接在JS中操作一个Vue data对象中不存在的属性，如果同时有通过<code>v-model</code>绑定到该对象的不存在的属性时，会出现诡异的行为表现，<code>console</code>中不会报出任何 <code>warn</code> 或 <code>error</code>。</p><p>需求是，实现三个复选框，第一个复选框初始为选中状态，一开始写出来是这样的——</p><figure class="highlight html"><figcaption><span>HTML</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-checkbox</span> <span class="attr">v-for</span>=<span class="string">&quot;box in checkboxes&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;box.id&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;box.selected&quot;</span>&gt;</span></span><br><span class="line">    复选框 &#123;&#123; box.title &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-checkbox</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><figcaption><span>JS</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">checkboxes</span>: [</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&#x27;a&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">title</span>: <span class="string">&#x27;b&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">title</span>: <span class="string">&#x27;c&#x27;</span> &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">checkboxes</span>[<span class="number">0</span>].<span class="property">selected</span> = <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>试下效果：</p><p class="codepen" data-height="265" data-theme-id="light" data-default-tab="result" data-user="iMaeGoo" data-slug-hash="yLLMazY" data-pen-title="vue-v-model-not-work"> <span>See the Pen <a target="_blank" rel="noopener" href="https://codepen.io/iMaeGoo/pen/yLLMazY">vue-v-model-not-work</a> by iMaeGoo (<a target="_blank" rel="noopener" href="https://codepen.io/iMaeGoo">@iMaeGoo</a>) on <a target="_blank" rel="noopener" href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><p>复选框a的表现显然是异常的，点击不能成功地切换选中状态，而在点击之后再点击其他复选框，才会“有延迟地”切换状态。</p></div><a class="article-more button is-small is-size-7" href="/2019/vue-model-not-work/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-07-25T13:26:55.000Z" title="2019/7/25 21:26:55">2019-07-25</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/backend/">BackEnd</a></span><span class="level-item">3 分钟读完 (大约523个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/http-log/">Node.js 实现 HTTP 访问日志</a></p><div class="content"><p>越来越咸，两个月没发文章了，刚刚换项目了，开始学一些新的知识。<br>近来调试 webhook 和 http callback 比较多，想要使用 Node.js 写一个接收所有 HTTP 请求，并把请求头和请求体写进log，返回 200 OK 的 service。</p><p>其实就是简单的 access.log 啦。<br>其实就是刚学习 Node.js 写的 demo 啦。<br>啊这是很简单你不要拆穿啦。</p><p>这是输出的 log 的样子，优化了可读性，时间、method、path、URL参数（Query）、请求头（Header）、请求体（Body）都详细记录了：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">info: 2019-07-25 18:04:36</span><br><span class="line">    POST /v1.0/standard</span><br><span class="line">    Query:</span><br><span class="line">        search: keyword</span><br><span class="line">    Header:</span><br><span class="line">        cache-control: no-cache</span><br><span class="line">        postman-token: f4103067-4b07-447d-9fab-f09a75b6ddda</span><br><span class="line">        content-type: application/json</span><br><span class="line">        user-agent: PostmanRuntime/3.0.11-hotfix.2</span><br><span class="line">        accept: */*</span><br><span class="line">        host: localhost:4000</span><br><span class="line">        accept-encoding: gzip, deflate</span><br><span class="line">        content-length: 209</span><br><span class="line">        connection: keep-alive</span><br><span class="line">    Body:</span><br><span class="line">        appId: XXX</span><br><span class="line">        data:</span><br><span class="line">            userId: 123</span><br><span class="line">            requestId: 456</span><br><span class="line">        timestamp: 0</span><br></pre></td></tr></table></figure></div><a class="article-more button is-small is-size-7" href="/2019/http-log/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-05-08T10:25:42.000Z" title="2019/5/8 18:25:42">2019-05-08</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">1 分钟读完 (大约177个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/ajs-function-in-directive-scope/">AngularJS 给 directive scope 绑定的 function 传参</a></p><div class="content"><p>如果我们想要给directive的scope中绑定的方法传递参数，需要传递对象，而不是直接传值。</p><p>举个栗子，这里的clickOutside是从用的地方传入的一个方法，debug时我们会发现绑进来的<code>clickOutside</code>并不是我们传的<code>clickOutSideAction</code>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">directive</span>(<span class="string">&#x27;clickOutSide&#x27;</span>, [<span class="string">&#x27;$document&#x27;</span>, <span class="keyword">function</span>(<span class="params">$document</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">restrict</span>: <span class="string">&#x27;A&#x27;</span>,</span><br><span class="line">        <span class="attr">scope</span>: &#123;</span><br><span class="line">            <span class="attr">clickOutside</span>: <span class="string">&#x27;&amp;&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">link</span>: <span class="keyword">function</span> (<span class="params">scope, el</span>) &#123;</span><br><span class="line">            $document.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">                scope.<span class="title function_">clickOutside</span>();</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">data-click-out-side</span> <span class="attr">click-Outside</span>=<span class="string">&quot;$ctrl.clickOutSideAction()&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果需要在这里给clickOutSideAction传参数，应该这样改：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">directive</span>(<span class="string">&#x27;clickOutSide&#x27;</span>, [<span class="string">&#x27;$document&#x27;</span>, <span class="keyword">function</span>(<span class="params">$document</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="attr">link</span>: <span class="keyword">function</span> (<span class="params">scope, el</span>) &#123;</span><br><span class="line">            ...</span><br><span class="line">                scope.<span class="title function_">clickOutside</span>(&#123;<span class="attr">event</span>: e&#125;);</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">data-click-out-side</span> <span class="attr">click-Outside</span>=<span class="string">&quot;$ctrl.clickOutSideAction(event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>好处是在实际使用directive的地方，不需要考虑参数列表顺序，只需要保证参数名称正确。</p></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-04-17T11:14:15.000Z" title="2019/4/17 19:14:15">2019-04-17</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">2 分钟读完 (大约267个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/ajs-auto-width-input/">AngularJS input 输入框自适应内容宽度</a></p><div class="content"><p>在Gist上找到的一个directive，用来让input输入框的宽度自适应内容宽度。<br><a target="_blank" rel="noopener" href="https://gist.github.com/mbenford/8016984">https://gist.github.com/mbenford/8016984</a></p><p>原理是生成一个相同样式的，隐藏的span，通过span的宽度动态改变input的宽度。<br>同时兼顾了input有placeholder的情况。</p><p>如果是在比较大的系统中，可以用throttle节流阀包装一下resize方法，避免性能问题。</p><p>如果是textarea，对应的directive在这里：<br><a target="_blank" rel="noopener" href="https://github.com/monospaced/angular-elastic">https://github.com/monospaced/angular-elastic</a></p></div><a class="article-more button is-small is-size-7" href="/2019/ajs-auto-width-input/#more">阅读更多</a></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2019/md-bubble/"><img class="fill" src="/gallery/2019/md-bubble-thumbnail.png" alt="AngularJS Material制作气泡弹出效果" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-04-04T11:34:01.000Z" title="2019/4/4 19:34:01">2019-04-04</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">2 分钟读完 (大约354个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/md-bubble/">AngularJS Material制作气泡弹出效果</a></p><div class="content"><p>点击一个按钮后需要弹出一个对话气泡，气泡内有各种设置项，点击外侧可以退出。</p><p>现在的效果：</p><p><img src="/gallery/2019/md-bubble.png"></p><p>在线测试：<a target="_blank" rel="noopener" href="https://codepen.io/iMaeGoo/pen/KYVRGL">https://codepen.io/iMaeGoo/pen/KYVRGL</a></p></div><a class="article-more button is-small is-size-7" href="/2019/md-bubble/#more">阅读更多</a></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2019/googleapis-replacer/"><img class="fill" src="/gallery/2019/chrome.jpg" alt="编写Chrome插件将googleapis替换为国内可访问的CDN" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2019-04-03T02:08:50.000Z" title="2019/4/3 10:08:50">2019-04-03</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/tech/">Tech</a><span> / </span><a class="link-muted" href="/categories/tech/frontend/">FrontEnd</a></span><span class="level-item">2 分钟读完 (大约314个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/googleapis-replacer/">编写Chrome插件将googleapis替换为国内可访问的CDN</a></p><div class="content"><p>由于公司不能安装梯子，所以不能访问谷歌商店，平时频繁地要访问国外的AngularJS网站，比如AgGrid，AngularJS Material，AngularJS官网等，很多用了Google的CDN源，页面就无法正常加载。</p><p>一开始的思路是改host文件，但是我们没有Google CDN的证书，会造成证书错误。</p><p>参考并优化了：<a target="_blank" rel="noopener" href="https://github.com/justjavac/ReplaceGoogleCDN">https://github.com/justjavac/ReplaceGoogleCDN</a> ，动手写了一个Chrome插件，对所有特定请求重定向，解决痛点！</p></div><a class="article-more button is-small is-size-7" href="/2019/googleapis-replacer/#more">阅读更多</a></article></div><nav class="pagination is-centered mt-4" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/tags/js/page/0/">上一页</a></div><div class="pagination-next"><a href="/tags/js/page/2/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/tags/js/">1</a></li><li><a class="pagination-link" href="/tags/js/page/2/">2</a></li></ul></nav></div><style>.column.column-left,.column.column-right{display:none}</style><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/images/avatar.jpg" alt="iMaeGoo"></figure><p class="title is-size-4 is-block" style="line-height:inherit">iMaeGoo</p><p class="is-size-6 is-block">虹墨空间站</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Zhengzhou, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives/"><p class="title">245</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories/"><p class="title">12</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags/"><p class="title">45</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/imaegoo" target="_blank" rel="me noopener" id="widget-follow">GitHub</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="哔哩哔哩" href="https://space.bilibili.com/4750943"><i class="fas fa-video"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="QQ" href="https://jq.qq.com/?_wv=1027&amp;k=2l9ZGIoL"><i class="fab fa-qq"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Mail" href="mailto:hello@imaegoo.com"><i class="fas fa-envelope"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget"><div class="card-content"><div class="media" style="overflow:hidden;align-items:center"><div class="media-left"><figure class="image is-96x96"><img src="/images/weixin/qrcode.jpg" alt="微信二维码"></figure></div><div class="media-content"><div id="weixin-search-logo"></div><div class="control has-icons-left" id="weixin-search-text"><input class="input" readonly="readonly" value="虹墨iMaeGoo" onfocus="this.select()"><span class="icon is-small is-left"><i class="fas fa-search"></i></span></div></div></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2025/"><span class="level-start"><span class="level-item">2025</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/"><span class="level-start"><span class="level-item">2024</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/"><span class="level-start"><span class="level-item">2020</span></span><span class="level-end"><span class="level-item tag">33</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/"><span class="level-start"><span class="level-item">2019</span></span><span class="level-end"><span class="level-item tag">35</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/"><span class="level-start"><span class="level-item">2018</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/"><span class="level-start"><span class="level-item">2016</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/"><span class="level-start"><span class="level-item">2013</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2012/"><span class="level-start"><span class="level-item">2012</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2011/"><span class="level-start"><span class="level-item">2011</span></span><span class="level-end"><span class="level-item tag">29</span></span></a></li><li><a class="level is-mobile" href="/archives/2010/"><span class="level-start"><span class="level-item">2010</span></span><span class="level-end"><span class="level-item tag">35</span></span></a></li><li><a class="level is-mobile" href="/archives/2009/"><span class="level-start"><span class="level-item">2009</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/archives/2008/"><span class="level-start"><span class="level-item">2008</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time datetime="2025-09-02T00:00:00.000Z">2025-09-02</time></p><p class="title"><a href="/2025/uninstall-netdisk-image-viewer/">卸载百度网盘智能看图</a></p><p class="categories"><a href="/categories/tech/">Tech</a> / <a href="/categories/tech/windows/">Windows</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2025-09-01T09:30:00.000Z">2025-09-01</time></p><p class="title"><a href="/2025/monaco-editor-cdn/">CDN 方式引入 Monaco Editor</a></p><p class="categories"><a href="/categories/tech/">Tech</a> / <a href="/categories/tech/frontend/">FrontEnd</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2025-09-01T04:30:00.000Z">2025-09-01</time></p><p class="title"><a href="/2025/html-to-md/">在线工具 - 富文本转 Markdown</a></p><p class="categories"><a href="/categories/tool/">Tool</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2025-08-25T04:00:00.000Z">2025-08-25</time></p><p class="title"><a href="/2025/android-pad-input-method/">2025 年了，安卓平板上什么第三方九键输入法最好用？</a></p><p class="categories"><a href="/categories/tech/">Tech</a> / <a href="/categories/tech/android/">Android</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2025-08-25T00:00:00.000Z">2025-08-25</time></p><p class="title"><a href="/2025/harmony-pc-electron/">鸿蒙 PC 编译运行 Electron 应用</a></p><p class="categories"><a href="/categories/tech/">Tech</a> / <a href="/categories/tech/harmony/">Harmony</a></p></div></article></div></div><div class="card widget" id="twikoo-new"><div class="card-content"><div class="menu"><h3 class="menu-label">最新评论</h3><script>window.twikooEnvId="https://twikoo.imaegoo.com"</script><div class="twikoo-new-container"></div></div></div></div></div><style>.column.column-left,.column.column-right{display:block}</style></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img class="logo-img" src="/images/logo.png" alt="虹墨空间站" height="28"><img class="logo-img-dark" src="/images/logo-dark.png" alt="虹墨空间站" height="28"></a><p class="is-size-7"><span>&copy; 2025 iMaeGoo</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/imaegoo/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">总访问量&nbsp;<span id="busuanzi_value_site_pv">-</span>&nbsp;次&nbsp;&nbsp;总访客数&nbsp;<span id="busuanzi_value_site_uv">-</span>&nbsp;人</span></p><p class="is-size-7"><a href="https://beian.mps.gov.cn/#/query/webSearch?code=41010502005985" rel="noreferrer" target="_blank">豫公网安备41010502005985</a>&nbsp;&nbsp;<a href="https://beian.miit.gov.cn" target="_blank" rel="noreferrer noopener">豫ICP备18017229号</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/deed.zh"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="/js/imaegoo/jquery/3.3.1/dist/jquery.min.js"></script><script src="/js/imaegoo/moment/2.22.2/min/moment-with-locales.min.js"></script><script src="https://registry.npmmirror.com/twikoo/1.6.44/files/dist/twikoo.min.js"></script><script src="/js/imaegoo/clipboard/2.0.4/dist/clipboard.min.js" defer="defer"></script><script>moment.locale("zh-cn")</script><script>var IcarusThemeSettings={article:{highlight:{clipboard:!0,fold:"unfolded"}}}</script><script data-pjax src="/js/column.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer="defer"></script><script src="/js/imaegoo/lightgallery/1.10.0/dist/js/lightgallery.min.js" defer="defer"></script><script src="/js/imaegoo/justifiedGallery/3.8.1/dist/js/jquery.justifiedGallery.min.js" defer="defer"></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><script src="/js/imaegoo/cookieconsent/3.1.1/build/cookieconsent.min.js" defer="defer"></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-right",
        content: {
          message: "此网站使用 Cookie，以启用评论系统和分析功能。",
          dismiss: "知道了",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "/cookies/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script data-pjax src="/js/main.js" defer="defer"></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><div class="searchbox-pinyin"><label class="checkbox"><input id="search-by-pinyin" type="checkbox" checked="checked"><span> 拼音检索</span></label></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/imaegoo/pinyin.js" defer="defer"></script><script src="/js/insight.js" defer="defer"></script><script>document.addEventListener("DOMContentLoaded",function(){loadInsight({contentUrl:"/content.json"},{hint:"想要查找什么...",untitled:"(无标题)",posts:"文章",pages:"页面",categories:"分类",tags:"标签"})})</script><script type="text/javascript" src="/js/imaegoo/imaegoo.js"></script><script type="text/javascript" src="/js/imaegoo/universe.js"></script></body></html>